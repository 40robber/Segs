CREATE TABLE accounts
(
  id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  account_id BIGINT NOT NULL UNIQUE,
  max_slots SMALLINT DEFAULT 8 NOT NULL
);

CREATE TABLE characters
(
  id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  char_level SMALLINT DEFAULT 0 NOT NULL,
  slot_index SMALLINT DEFAULT 0 NOT NULL UNIQUE,
  account_id INTEGER NOT NULL UNIQUE REFERENCES accounts(id) ON UPDATE CASCADE ON DELETE CASCADE,
  char_name VARYING CHARACTER(32) NOT NULL,
  archetype VARYING CHARACTER(32) NOT NULL,
  origin VARYING CHARACTER(32) NOT NULL,
  bodytype INTEGER NOT NULL,
  current_map VARYING CHARACTER(128) NOT NULL,
  last_costume_id INTEGER DEFAULT 0
);

CREATE TABLE costume
(
  id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  character_id INTEGER NOT NULL UNIQUE REFERENCES characters(id) ON UPDATE CASCADE ON DELETE CASCADE,
  costume_index SMALLINT NOT NULL UNIQUE,
  skin_color BIGINT
);

CREATE TABLE costume_part
(
  id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  costume_id INTEGER NOT NULL UNIQUE REFERENCES costume(id) ON UPDATE CASCADE ON DELETE CASCADE,
  part_type INTEGER DEFAULT 0 NOT NULL UNIQUE,
  name_0 VARYING CHARACTER(256),
  name_1 VARYING CHARACTER(256),
  name_2 VARYING CHARACTER(256),
  name_3 VARYING CHARACTER(256),
  color_0 BIGINT NOT NULL,
  color_1 BIGINT NOT NULL,
  color_2 INTEGER DEFAULT 0 NOT NULL,
  color_3 INTEGER DEFAULT 0 NOT NULL
);

CREATE INDEX fki_ ON characters(account_id);
