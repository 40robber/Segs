CREATE TABLE `accounts` (
	`id`	INTEGER PRIMARY KEY AUTOINCREMENT,
	`account_id`	INTEGER UNIQUE,
	`max_slots`	INTEGER
);
;
CREATE TABLE sqlite_sequence(name,seq);
CREATE TABLE `characters` (
	`id`	INTEGER PRIMARY KEY AUTOINCREMENT,
	`char_level`	INTEGER NOT NULL DEFAULT 0,
	`slot_index`	INTEGER NOT NULL DEFAULT 0,
	`account_id`	INTEGER NOT NULL,
	`char_name`	TEXT NOT NULL,
	`archetype`	TEXT NOT NULL,
	`origin`	TEXT NOT NULL,
	`bodytype`	integer NOT NULL,
	`current_map`	NUMERIC NOT NULL,
	`last_costume_id`	integer DEFAULT 0,
	FOREIGN KEY(`account_id`) REFERENCES accounts ( account_id ) ON DELETE CASCADE,
	UNIQUE(account_id, slot_index)
);
;
CREATE TABLE `costume`
(
  `id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
  `character_id` integer NOT NULL,
  `costume_index` integer NOT NULL,
  `skin_color` integer,
  `parts` text,
	FOREIGN KEY(`character_id`) REFERENCES characters ( id ) ON DELETE CASCADE,
	UNIQUE (character_id, costume_index)
);
;
CREATE TABLE options (
	id integer PRIMARY KEY AUTOINCREMENT,
	character_id integer,
	option varchar,
	value integer
);
CREATE TABLE gui (
	id integer PRIMARY KEY AUTOINCREMENT,
	character_id integer,
	window integer,
	x integer,
	y integer,
	sx integer,
	sy integer,
	scale integer,
	color1 integer,
	color2 integer,
	frozen integer,
	state integer,
	resizable integer,
	flags integer
);
CREATE TABLE sqlite_stat1(tbl,idx,stat);
CREATE TABLE `table_versions` (
    `id` INTEGER PRIMARY KEY AUTOINCREMENT,
    `table_name` VARCHAR NOT NULL,
    `version` INTEGER NOT NULL DEFAULT 0,
    `last_update` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
);
